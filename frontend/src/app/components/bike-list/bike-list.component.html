<app-header></app-header>

<div class="container">
  <h1>Yamaha Motorcycle Collection</h1>

  @if (isLoading()) {
    <div class="loading">
      <div class="spinner"></div>
      <p>Loading bikes...</p>
    </div>
  } @else if (errorMessage()) {
    <div class="error-message">{{ errorMessage() }}</div>
  } @else {
    <div class="bike-grid" [@fadeIn]>
      @for (bike of bikes(); track bike._id) {
        <div class="bike-card" [@fadeIn]>
          <!-- Photo Gallery -->
          <div class="photo-gallery">
            @if (bike.photos?.length) {
              @for (photo of bike.photos; track photo; let i = $index) {
                <img
                  [src]="backendUrl + photo"
                  alt="{{bike.name}} photo"
                  class="gallery-photo"
                  [class.active]="i === 0"
                />
              }
            } @else {
              <div class="no-photo">No photos available</div>
            }
          </div>

          <!-- Bike Info -->
          <div class="bike-info">
            <h2>{{ bike.name }}</h2>
            <div class="meta">
              {{ bike.model || '—' }} • {{ bike.year || 'N/A' }}
            </div>
            @if (bike.price) {
              <div class="price">${{ bike.price.toLocaleString() }}</div>
            }
            <p class="description">{{ bike.description || 'No description available' }}</p>
          </div>
        </div>
      } @empty {
        <p class="no-results">No bikes found in the inventory</p>
      }
    </div>
  }
</div>
